# Implementation Plan: Point Assets Tab Refinement

**Branch**: `012-point-assets-refine` | **Date**: 2026-01-08 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/012-point-assets-refine/spec.md`

## Summary

Refine the `PointDetailTab` component to strictly align with the new Information Architecture. Key changes include implementing a **Segmented Control** for view switching between "Points Detail" and "Points Ledger", ensuring **exact column mapping** for both tables, and adding **Status/Type/Date filters**. The implementation will involve refactoring the large `PointDetailTab.tsx` into smaller, focused sub-components (`PacketTable.tsx`, `LedgerTable.tsx`) for better maintainability.

## Technical Context

**Language/Version**: TypeScript 5.x
**Primary Dependencies**: React 19, Tailwind CSS, Lucide React, `date-fns` (standard util).
**Storage**: N/A (Client-side mocking for Member Page UI).
**Testing**: Manual Verification via `quickstart.md` (Unit testing not scoped for this UI refinement).
**Target Platform**: Single Page Application (Vite).
**Project Type**: Web Application.
**Performance Goals**: Instant view switching (<100ms), 60fps scrolling.
**Constraints**: Must use Tailwind utility classes; No external UI libraries for components.
**Scale/Scope**: ~3 files affected, low complexity.

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

- [x] **Tech Stack**: Vite + React 19 + TypeScript. (Rule 1)
- [x] **Styling**: Tailwind CSS + Lucide Icons. (Rule 3)
- [x] **Routing**: SPA architecture reserved. (Rule 4)
- [x] **Project Structure**: Source code in `src/`. (Rule 5)
- [x] **IA Integrity**: Columns and filters map 1:1 to Spec/IA. (Rule 10)
- [x] **Handshake**: Empty/Loading states explicitly planned. (Rule 12)

*PRE-FLIGHT*: Must read `Journal.md` to prevent recurring errors.

## Project Structure

### Documentation (this feature)

```text
specs/012-point-assets-refine/
├── plan.md              # This file
├── research.md          # Data Model & Architecture decisions
├── data-model.md        # Entity definitions
├── quickstart.md        # Validation guide
├── contracts/           # N/A (No new API contracts)
└── tasks.md             # To be generated by /speckit.tasks
```

### Source Code

```text
src/
├── components/
│   └── member/
│       └── detail/
│           ├── PointDetailTab.tsx       # Main Container (View Controller)
│           ├── PointPacketTable.tsx     # [NEW] Extracted Packet Table
│           └── PointLedgerTable.tsx     # [NEW] Extracted Ledger Table
└── types.ts                             # Existing types (No change)
```

**Structure Decision**: Extract Tables into separate files to reduce `PointDetailTab.tsx` complexity and improve readability.

## Verify Plan

### Automated Tests
*N/A - UI Refinement relying on Visual Verification.*

### Manual Verification
1.  **Summary Stats**: Verify cards and colors.
2.  **Packet View**: Verify columns (ID, Total, Remaining...) and visual attributes (Expiry warnings).
3.  **Ledger View**: Verify columns (Type, Value +/- colors...) and Type Filter.
4.  **Responsiveness**: Check mobile/tablet layouts.
